<table th:fragment="dataTable(search, category, currentPage, sortBy, direction, products)" id="data-table" class="data-table">
    <thead>
    <tr>
        <th>
            <a href="#"
               th:hx-get="@{/products/table(sortBy='name', direction=${sortBy == 'name' && direction == 'asc' ? 'desc' : 'asc'}, page=0)}"
               hx-target="#results"
               hx-include="#search-input, #category-filter">
                Name
                <span th:if="${sortBy == 'name'}" th:text="${direction == 'asc' ? '▲' : '▼'}"></span>
            </a>
        </th>
        <th>Category</th>
        <th>
            <a href="#"
               th:hx-get="@{/products/table(sortBy='price', direction=${sortBy == 'price' && direction == 'asc' ? 'desc' : 'asc'}, page=0)}"
               hx-target="#results"
               hx-include="#search-input, #category-filter">
                Price
                <span th:if="${sortBy == 'price'}" th:text="${direction == 'asc' ? '▲' : '▼'}"></span>
            </a>
        </th>
        <th>
            <a href="#"
               th:hx-get="@{/products/table(sortBy='stock', direction=${sortBy == 'stock' && direction == 'asc' ? 'desc' : 'asc'}, page=0)}"
               hx-target="#results"
               hx-include="#search-input, #category-filter">
                Stock
                <span th:if="${sortBy == 'stock'}" th:text="${direction == 'asc' ? '▲' : '▼'}"></span>
            </a>
        </th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product : ${products}">
        <td th:text="${product.name}">Product Name</td>
        <td><span class="badge-small" th:text="${product.category}">Category</span></td>
        <td th:text="${'$' + #numbers.formatDecimal(product.price, 1, 2)}">$0.00</td>
        <td th:text="${product.stock}">0</td>
        <td>
            <button class="btn btn-danger btn-small"
                    th:hx-delete="@{/products/{id}(id=${product.id}, sortBy=${sortBy}, direction=${direction}, page=${currentPage})}"
                    hx-target="#results"
                    hx-include="#search-input, #category-filter"
                    hx-confirm="Are you sure you want to delete this product?">
                Delete
            </button>
        </td>
    </tr>
    <tr th:if="${#lists.isEmpty(products)}">
        <td colspan="5" style="text-align: center; padding: 20px;">No products found</td>
    </tr>
    </tbody>
</table>
